{
  "hash": "201f30c648899c20cf02512f320d433e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"A use for Sankey Diagrams?\"\nauthor: \"JRowing\"\ndate: \"2025-05-5\"\ncategories: [Interesting Graphs, A-level Physics]\ntitle-block-banner: true\nexecute: \n  warning: false\n  message: false\n # echo: false\n \nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n\nA Sankey diagram is a type of flow chart used to visualize the distribution or movement of quantities through a system. Named after Captain Matthew Sankey, who first used it in 1898 to depict energy efficiency in steam engines, the diagram uses arrows or paths whose widths are proportional to the quantity they represent. This makes Sankey diagrams particularly effective for showing how resources, energy, information etc, are allocated across categories. They are especially useful for identifying dominant flows, bottlenecks, or imbalances within a process or dataset.\n\nIt occured to be that it might be an interesting way to display the breakdown of marks in an exam paper. \n\nThis Sankey diagram provides a visual breakdown of how marks were distributed across the A2 Component 2 (2023) Physics paper. It begins with a single \"Total Marks\" block, which then splits into individual physics topics, such as Circular Motion, Electric Fields, and Nuclear Decay. Each topic node flows into different styles of questions—Calculation, Explanation, Graphing/Data, or Recall—based on how the marks were awarded.\n\nThe diagram makes it easy to see which topics carried the most weight (e.g., Oscillations and Electric Fields received high totals) and which styles of questions were most common across the paper. Calculation-heavy topics dominate the assessment (obviously), while Graphing/Data and Recall play smaller but still significant roles.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Install if needed\nlibrary(networkD3)\n\n# Define nodes with Total Marks first\nnodes <- data.frame(name = c(\n  \"Total Marks\",\n  \"Circular Motion\", \"Gravitational Fields\", \"Electric Fields\", \"Capacitance\",\n  \"Magnetic Fields\", \"Nuclear Decay\", \"Nuclear Energy\", \"Thermodynamics\",\n  \"Oscillations\", \"Astrophysics\", \"Data Analysis\",\n  \"Calculation\", \"Explanation\", \"Graphing/Data\"\n))\n\n# Define total marks per topic (names MUST match exactly with nodes$name)\ntopic_totals <- c(\n  8,  # Circular Motion\n  7,  # Gravitational Fields\n  9,  # Electric Fields\n  8,  # Capacitance\n  7,  # Magnetic Fields\n  8,  # Nuclear Decay\n  8,  # Nuclear Energy\n  9,  # Thermodynamics\n  9,  # Oscillations\n  9,  # Astrophysics\n  8   # Data Analysis\n)\n\n# Topics names must align with node indices 1–11\ntopic_links <- data.frame(\n  source = 0,\n  target = 1:11,\n  value = topic_totals\n)\n\n# Style links from topics (1–11) to styles (12–14)\nstyle_links <- data.frame(\n  source = c(\n    1, 1,  # Circular Motion\n    2, 2,  # Gravitational Fields\n    3, 3,  # Electric Fields\n    4, 4,  # Capacitance\n    5, 5,  # Magnetic Fields\n    6, 6,  # Nuclear Decay\n    7, 7,  # Nuclear Energy\n    8, 8,  # Thermodynamics\n    9, 9,  # Oscillations\n    10,10, # Astrophysics\n    11,11  # Data Analysis\n  ),\n  target = c(\n    12, 13,\n    12, 13,\n    12, 14,\n    14, 13,\n    12, 13,\n    12, 13,\n    12, 13,\n    12, 13,\n    12, 13,\n    12, 13,\n    14, 13\n  ),\n  value = c(\n    6, 2,\n    5, 2,\n    5, 4,\n    5, 3,\n    5, 2,\n    4, 4,\n    6, 2,\n    5, 4,\n    7, 2,\n    5, 4,\n    6, 2\n  )\n)\n\n# Combine both sets of links\nlinks <- rbind(topic_links, style_links)\n\n# Draw Sankey diagram\nsankeyNetwork(Links = links, Nodes = nodes, Source = \"source\",\n              Target = \"target\", Value = \"value\", NodeID = \"name\",\n              fontSize = 12, nodeWidth = 30,\n              sinksRight = FALSE)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"sankeyNetwork html-widget html-fill-item\" id=\"htmlwidget-2f8f7649fefecf75dab2\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-2f8f7649fefecf75dab2\">{\"x\":{\"links\":{\"source\":[0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11],\"target\":[1,2,3,4,5,6,7,8,9,10,11,12,13,12,13,12,14,14,13,12,13,12,13,12,13,12,13,12,13,12,13,14,13],\"value\":[8,7,9,8,7,8,8,9,9,9,8,6,2,5,2,5,4,5,3,5,2,4,4,6,2,5,4,7,2,5,4,6,2]},\"nodes\":{\"name\":[\"Total Marks\",\"Circular Motion\",\"Gravitational Fields\",\"Electric Fields\",\"Capacitance\",\"Magnetic Fields\",\"Nuclear Decay\",\"Nuclear Energy\",\"Thermodynamics\",\"Oscillations\",\"Astrophysics\",\"Data Analysis\",\"Calculation\",\"Explanation\",\"Graphing/Data\"],\"group\":[\"Total Marks\",\"Circular Motion\",\"Gravitational Fields\",\"Electric Fields\",\"Capacitance\",\"Magnetic Fields\",\"Nuclear Decay\",\"Nuclear Energy\",\"Thermodynamics\",\"Oscillations\",\"Astrophysics\",\"Data Analysis\",\"Calculation\",\"Explanation\",\"Graphing/Data\"]},\"options\":{\"NodeID\":\"name\",\"NodeGroup\":\"name\",\"LinkGroup\":null,\"colourScale\":\"d3.scaleOrdinal(d3.schemeCategory20);\",\"fontSize\":12,\"fontFamily\":null,\"nodeWidth\":30,\"nodePadding\":10,\"units\":\"\",\"margin\":{\"top\":null,\"right\":null,\"bottom\":null,\"left\":null},\"iterations\":32,\"sinksRight\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/d3-4.9.1/d3.min.js\"></script>\n<script src=\"../../site_libs/sankey-1/sankey.js\"></script>\n<script src=\"../../site_libs/sankeyNetwork-binding-0.4.1/sankeyNetwork.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}